# README-ja

## 概要
特許データの処理を行う一連のスクリプトです。以下の4つのステップでデータを処理します。

1. **データ抽出 (extract)**
   - `text`ファイルから1行につき1ドキュメントとなるようにJSONLファイルへ変換。
   - Blacklist ファイルを参照し、該当するデータを除外。
2. **データのパース (parse)**
   - JSONLデータを解析し、構造化された情報を抽出。
3. **データの分析 (analysis)**
   - 解析結果の統計情報を計算し、文字数の分布を可視化。
4. **データのフィルタリング (filter)**
   - 必要なデータのみを抽出し、データセットとして整形。

## 必要環境
- Python 3.11+

## インストール方法
1. リポジトリをクローン:
   ```bash
   git clone https://github.com/llm-jp/scripts.git
   cd scripts/corpus/llm-jp-corpus-v4/ja/patent
   ```
2. 必要なライブラリをインストール:
   ```bash
   pip install -r requirements.txt
   ```

## 実行手順
以下の順番でスクリプトを実行してください。

1. **データ抽出:** (textファイルをJSONL形式に変換)
   ```bash
   bash extract/extract.sh
   ```
2. **データのパース:** (元のドキュメントからkey-valueデータに変換)
   ```bash
   bash parse/parse_all.sh <input_dir> <output_dir> <num_parallel>
   ```
3. **データの分析:** (データの分布の統計情報を取得)
   ```bash
   python analysis/analyze_keys.py <input_dir> --worker <num_workers>
   ```
4. **データのフィルタリング:** (指定した条件に基づきデータを抽出)
   ```bash
   python filter/filter.py <input_dir> <output_dir> --char-limit <min_length> --worker <num_workers>
   ```
5. (Optional) **フィルタ済みデータの分析:** (データの分布の統計情報を取得)
   ```bash
   python analysis/analyze_filterd.py <input_dir> --worker <num_workers>
   ```

